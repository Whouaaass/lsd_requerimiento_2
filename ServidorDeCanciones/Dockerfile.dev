FROM golang:1.24.9

WORKDIR /app

# Download modules first (cache)
COPY go.mod go.sum ./
RUN go mod download

# Copy everything (compose will mount source over this for live dev)
COPY . ./

ENV GO111MODULE=on

EXPOSE 5000

# Default developer command: run the server. For faster rebuilds you can
# override this in docker-compose to run 'go build' or a file-watcher.
CMD ["sh", "-c", "go run ./main"]
